//@ui5-bundle dev/facturas/Component-preload.js
sap.ui.require.preload({
	"dev/facturas/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","dev/facturas/model/models"],function(e,t,i){"use strict";return e.extend("dev.facturas.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device")}})});
},
	"dev/facturas/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("dev.facturas.controller.App",{onInit(){}})});
},
	"dev/facturas/controller/Facturas.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,o){"use strict";var s;return e.extend("dev.facturas.controller.Facturas",{onInit:function(){sap.ui.getCore().getConfiguration().setLanguage("es");s=this;s._token},onShowPdfPress:function(e){var t=e.getSource().getBindingContext().getObject().id_archivo;if(!t){sap.m.MessageToast.show("No se encontró la factura asociada.");return}var n="sb-0527dcd3-b653-429e-8aa1-dd18137a10cb!b518061|sdm-di-SDM_DI_PROD-prod!b41064";var o="a623621b-37d1-4ae1-a395-300f53b20cad$ondNGl8ZD9wJTx5TlpWrqoR7GCMKYlLKhIMxIBSRuSA=";var i="https://btp-invoice-xusbq15z.authentication.eu10.hana.ondemand.com/oauth/token?grant_type=client_credentials";jQuery.ajax({url:i,method:"POST",headers:{Authorization:"Basic "+btoa(n+":"+o)},success:e=>{s._token=e.access_token;s._getPdf(t)},error:e=>{console.log(e)}})},_getPdf:function(e){var t=s.getOwnerComponent().getManifestEntry("/sap.app/id");var n=t.replaceAll(".","/");var o=jQuery.sap.getModulePath(n);var i=`${o}/dms/?objectId=${e}`;var a=`/dms?objectId=${e}`;jQuery.ajax({url:i,method:"GET",headers:{"Content-Type":"application/pdf"},success:e=>{sap.m.MessageToast.show("Se encontro la factura asociada.")},error:e=>{sap.m.MessageToast.show("No se encontró la factura asociada.");console.log(e)}})},_openPdf:function(e){var t=URL.createObjectURL(blob);window.open(t)},onFilter:function(e){let t=[];let s=this.getView();let i=s.byId("invoiceNumber");if(i.getValue()!==""){const e=i.getValue();const s=e.slice(0,5);const a=e.slice(5,6);const r=e.slice(6);const c=new n({filters:[new n("punto_venta",o.EQ,s),new n("letra",o.EQ,a),new n("numero_comprobante",o.EQ,r)],and:true});t.push(c)}let a=this.byId("dateFrom").getDateValue();let r=this.byId("dateTo").getDateValue();if(a&&r){let e=a.toISOString().split("T")[0]+"T00:00:00Z";let s=r.toISOString().split("T")[0]+"T23:59:59Z";t.push(new n("fecha_emision",o.GE,e),new n("fecha_emision",o.LE,s))}const c=this.getView().byId("invoicesList");const d=c.getBinding("items");d.filter(t.length>0?new n(t,true):[])},onClearFilter:function(){let e=this.getView();const t=e.byId("dateFrom");if(t){t.setDateValue(null)}const n=e.byId("dateTo");if(n){n.setDateValue(null)}const o=e.byId("invoiceNumber");if(o){o.setValue("")}const s=e.byId("statusFilter");if(s){s.setSelectedKey("estado")}const i=e.byId("invoicesList");const a=i.getBinding("items");a.filter([]);a.sort(null)},removeFileExtension:function(e){return e.substring(0,e.lastIndexOf("."))},onOpenSortOptions:function(e){if(!this.sortOptionsSheet){this.sortOptionsSheet=new sap.m.ActionSheet({title:"Ordenar Por",showCancelButton:true,buttons:[new sap.m.Button({text:"Mayor a Menor",press:this.onSortDescending.bind(this)}),new sap.m.Button({text:"Menor a Mayor",press:this.onSortAscending.bind(this)})]});this.getView().addDependent(this.sortOptionsSheet)}this.sortOptionsSheet.openBy(e.getSource())},onSortDescending:function(){const e=this.getView().byId("invoicesList");const t=e.getBinding("items");const n=new sap.ui.model.Sorter("total",true);t.sort(n)},onSortAscending:function(){const e=this.getView().byId("invoicesList");const t=e.getBinding("items");const n=new sap.ui.model.Sorter("total",false);t.sort(n)},onStatusFilterChange:function(e){const t=e.getParameter("selectedItem").getKey();const n=this.getView().byId("invoicesList");const o=n.getBinding("items");const s=[];if(t){s.push(new sap.ui.model.Filter("estado",sap.ui.model.FilterOperator.EQ,t))}o.filter(s)}})});
},
	"dev/facturas/i18n/i18n.properties":'# This is the resource bundle for project1\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Consulta de Facturas Ingresadas\n\n#YDES: Application description\nappDescription=Consulta de Facturas Ingresadas.\n#XTIT: Main view title\ntitle=Facturas\nselectionScreen=Consulta de Facturas Ingresadas\nshipName=Nombre:\nbtnFilter=Filtrar\nbtnClearFilter=Limpiar Filtros\ninvoicesHeaderList=Consulta de Facturas Ingresadas\ndate=Fecha Desde:\ndateTo=Fecha Hasta:\ninvoiceNumber=N\\u00famero de Factura:\nstatus=Estado:',
	"dev/facturas/manifest.json":'{"_version":"1.64.0","sap.app":{"id":"dev.facturas","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.6","toolsId":"753abb5b-e14f-45bb-822c-152a08c43c6b"},"dataSources":{"mainService":{"uri":"odata/v4/portal/","type":"OData","settings":{"annotations":[],"localUri":"localService/metadata.xml","odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.124.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"dev.facturas.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"dev.facturas.view","async":true,"viewPath":"dev.facturas.view"},"routes":[{"name":"RouteFacturas","pattern":":?query:","target":["TargetFacturas"]}],"targets":{"TargetFacturas":{"id":"Facturas","name":"Facturas"}}},"rootView":{"viewName":"dev.facturas.view.App","type":"XML","id":"App"}},"sap.cloud":{"public":true,"service":"devfacturas"}}',
	"dev/facturas/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"dev/facturas/view/App.view.xml":'<mvc:View controllerName="dev.facturas.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"dev/facturas/view/Facturas.view.xml":'<mvc:View\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    controllerName="dev.facturas.controller.Facturas"\n    displayBlock="true"><Page id="page" title="{i18n>title}"><content><Panel id="panel" headerText="{i18n>selectionScreen}"><Label\n                    id="labelInvoiceNumber"\n                    labelFor="invoiceNumber"\n                    text="{i18n>invoiceNumber}"\n                    textAlign="Initial"\n                    class="sapUiSmallMargin"/><Input\n                    id="invoiceNumber"\n                    width="100px"\n                    textAlign="Initial"/><Label\n                    id="labelDate"\n                    text="{i18n>date}"\n                    class="sapUiSmallMargin"/><DatePicker\n                    id="dateFrom"\n                    textAlign="Initial"\n                    displayFormat="dd/MM/yyyy"\n                    valueFormat="yyyy-MM-dd"\n                    width="150px"\n                    placeholder="ej: 01/01/2024"/><Label\n                    id="labelDateTo"\n                    text="{i18n>dateTo}"\n                    class="sapUiSmallMargin"/><DatePicker\n                    id="dateTo"\n                    textAlign="Initial"\n                    displayFormat="dd/MM/yyyy"\n                    valueFormat="yyyy-MM-dd"\n                    width="150px"\n                    placeholder="ej: 01/01/2024"/><Label id="status"\n                        text="{i18n>status}"\n                        class="sapUiSmallMargin"\n                        /><Select id="statusFilter" change="onStatusFilterChange" width="100px" ><items><core:Item id="estado"    key="todos" text="Todos"/><core:Item id="procesada" key="S"     text="Procesada" /><core:Item id="enProceso" key="W"     text="En Proceso" /><core:Item id="rechazada" key="E"     text="Rechazada" /></items></Select><Button\n                    id="btnFilter"\n                    text="{i18n>btnFilter}"\n                    icon="sap-icon://filter"\n                    press="onFilter"\n                    class="sapUiSmallMarginEnd"/><Button\n                    id="btnClearFilter"\n                    text="{i18n>btnClearFilter}"\n                    icon="sap-icon://clear-filter"\n                    press="onClearFilter"\n                    class="sapUiSmallMarginEnd"/></Panel><Panel id="list"><HBox id="btn" class="btn"><Button id="ordenar" text="Ordenar" press="onOpenSortOptions" class="sapUiSmallMarginEnd"/></HBox><Table id="invoicesList"\n                       class="sapUiResponsiveMargin"\n                       width="auto"\n                       items="{/Datos_Extraidos}"\n                       enableBusyIndicator="true"\n                       growingThreshold="10"\n                       growingScrollToLoad="true"\n                    ><columns><Column id="id" visible="false" class="columnColor"><header><Text id="textId" text="ID"/></header></Column><Column id="conPo" visible="false"><header><Text id="textConPo" text="Con PO"/></header></Column><Column id="cuit" visible="false"><header><Text id="textCuit" text="CUIT"/></header></Column><Column id="idArchivo" visible="false" ><header><Text id="textIdArchivo" text="ID Archivo"/></header></Column><Column id="idWorkflow"  visible="false"><header><Text id="textIdWorkflow" text="ID Workflow"/></header></Column><Column id="nroFac"><header><Text id="textNroFac" text="Número de Factura" textAlign="Center"/></header></Column><Column id="colFecha"><header><Text id="textFecha" text="Fecha" textAlign="Center"/></header></Column><Column id="monto"><header><Text id="textImporte" text="Importe" textAlign="Center"/></header></Column><Column id="colEstado"><header><Text id="textEstado" text="Estado" textAlign="Center"/></header></Column><Column id="razon"><header><Text id="textRazon" text="Motivo de rechazo" textAlign="Center"/></header></Column><Column id="pdf"><header><Text id="textPdf" text="Ver PDF" textAlign="Center"/></header></Column></columns><items><ColumnListItem id="columnItems"><cells><Text id="celId" text="{ID}" visible="false" /><Text id="celConPo" text="{con_po}" visible="false" /><Text id="celCuit" text="{cuit}" visible="false" /><Text id="celIdArchivo" text="{id_archivo}"  visible="false"/><Text id="celIdWorkflow" text="{id_workflow}" visible="false" /><Text id="cellNroFac" text="{punto_venta}{letra}{numero_comprobante}"/><Text id="cellFecha" text="{fecha_emision}"/><Text id="cellTotal" text="{\n                                    parts:[\'total\',\'\'],\n                                    type:\'sap.ui.model.type.Currency\',\n                                    formatOptions:{currencyCode: false}}"/><ObjectStatus id="celStatus" text="{= ${estado} === \'S\' ? \'Factura procesada\' : ${estado} === \'W\' ? \'Factura en proceso\' : ${estado} === \'E\' ? \'Factura rechazada\' : \'Estado desconocido\' }"\n                                              icon="{= ${estado} === \'S\' ? \'sap-icon://accept\' : ${estado} === \'W\' ? \'sap-icon://status-in-process\' : ${estado} === \'E\' ? \'sap-icon://error\' : \'\' }"\n                                              state="{= ${estado} === \'S\' ? \'Success\' : ${estado} === \'W\' ? \'Warning\' : ${estado} === \'E\' ? \'Error\' : \'None\' }"\n                                              /><ObjectStatus id="celRazon" text="{= ${estado} === \'E\' ? ${razon} : \'\' }" icon="{= ${estado} === \'W\' ? \'sap-icon://less\' : \'\' }{= ${estado} === \'S\' ? \'sap-icon://less\' : \'\' }"/><Button id="verPdf" press="onShowPdfPress" \n                                        icon="sap-icon://pdf-attachment" \n                                        /></cells></ColumnListItem></items></Table><core:HTML id="idFrame"/></Panel></content></Page></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
